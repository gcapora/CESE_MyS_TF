/****************************************************************************************
 * Archivo:  generador_seno.c
 * Breve:    Control de CLP generador de señal senoidal mediante código en procesador.
 *
 ***************************************************************************************/

/*** Librerías *************************************************************************/

#include "xparameters.h"
#include "xil_io.h"
#include "IP_seno.h"

/*** Macros ****************************************************************************/

#define RESETEAR	     0x80000000   // Bit para resetar el contador
#define HABILITAR        0x40000000   // Bit para habilitar el contador
#define MASCARA_CONTADOR 0x7FFFFF     // Máscara que coresponde al contador
#define MAXIMA_CUENTA    MASCARA_CONTADOR
#define CUENTA_ENTERA    0x200000     // Cuenta unitaria

#define MEGA             1000000
#define FREC_RELOJ       100 * MEGA   // Frecuencia de reloj



//====================================================

int main (void) {

	int cuenta = HABILITAR | CUENTA_ENTERA;
	int opA = 1256;
	int opB = 800;

    xil_printf("-- Inicio del programa para validar el uso de IP cores propios --\r\n");

    IP_SENO_mWriteReg(XPAR_IP_SENO_0_S_AXI_BASEADDR, IP_SENO_S_AXI_SLV_REG0_OFFSET, cuenta);
    //res = SUM_IP_mReadReg(XPAR_SUM_IP_0_S_AXI_BASEADDR, SUM_IP_S_AXI_SLV_REG2_OFFSET);

    xil_printf("Cuenta: %d \r\n", cuenta & MASCARA_CONTADOR);


}
